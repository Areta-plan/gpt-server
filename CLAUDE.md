# GPT Server ν”„λ΅μ νΈ - Claude λ©”λ¨λ¦¬

## ν”„λ΅μ νΈ κ°μ”
GPT κΈ°λ° λΈ”λ΅κ·Έ μƒμ„± λ° λ¶„λ¥ μ‹μ¤ν… + RLHF + OpenAI νμΈνλ‹ ν†µν•©

## ν•µμ‹¬ μ‹μ¤ν…

### 1. μ›Ή μΈν„°νμ΄μ¤
- **3κ° νƒ­**: μΌλ°μ±„ν…, λΈ”λ΅κ·Έμƒμ„±, μλ™λ¶„λ¥, νμΈνλ‹
- **RLHF ν‰κ°€ μ‹μ¤ν…**: λ³„μ  ν‰κ°€ + λ¨λ²” λ‹µμ• μ μ•
- **μƒνƒ κ΄€λ¦¬**: β³ λ€κΈ° β†’ β… μ™„λ£ β†’ β‘οΈ μ μ¶μ™„λ£

### 2. μ„λ²„ κµ¬μ΅°
- **server.js**: Express λ©”μΈ μ„λ²„, λΈ”λ΅κ·Έ μ¶”μ¶
- **lib/openaiClassificationClient.js**: OpenAI νμΈνλ‹ λ¨λΈ ν΄λΌμ΄μ–ΈνΈ
- **lib/autoClassificationManager.js**: λ¶„λ¥ κ²°κ³Ό κ΄€λ¦¬ λ° μ¬κµ¬μ„± μ‹μ¤ν…
- **routes/**: λ¶„λ¥, RLHF, νμΈνλ‹ API μ—”λ“ν¬μΈνΈ

### 3. νμΈνλ‹ μ‹μ¤ν… β­
- **μ™„μ „ μλ™ν™”**: λ°μ΄ν„° μ¤€λΉ„ β†’ μ—…λ΅λ“ β†’ ν›λ ¨ β†’ λ°°ν¬
- **μ›Ή μΈν„°νμ΄μ¤**: μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§, λ¨λΈ ν…μ¤νΈ, ν™κ²½λ³€μ μ μ©
- **5κ° μΉ΄ν…κ³ λ¦¬**: title, firstparagraph, closing, story, usp
- **λ°μ΄ν„° ν†µν•©**: ν›λ ¨ μμ‹ + μΉμΈ λ°μ΄ν„° + RLHF κ³ ν’μ§ λ°μ΄ν„°

### 4. λ””λ ‰ν† λ¦¬ κµ¬μ΅°
- `auto_classified/`: OpenAI λ¶„λ¥ κ²°κ³Ό (32κ°)
- `training_examples/`: μλ™ ν›λ ¨ μμ‹ (45κ°)
- `fine_tune_data/`: νμΈνλ‹ λ°μ΄ν„°μ…‹ (45κ°)
- `rlhf_feedback.jsonl`: μ‚¬μ©μ ν”Όλ“λ°± λ„μ  λ°μ΄ν„°
- `models/latest_model.txt`: ν„μ¬ ν™μ„± λ¨λΈ

## μ£Όμ” μ™„λ£ κΈ°λ¥

### β… λΈ”λ΅κ·Έ μ¶”μ¶ μ‹μ¤ν…
- **μ λ© μ¶”μ¶**: iframe μ „ν™ β†’ HTML title νƒκ·Έ μ¶”μ¶ (100% μ •ν™•λ„)
- **μ½ν…μΈ  μ¶”μ¶**: Puppeteer κΈ°λ°, λ„¤μ΄λ²„ νΉν™” μ •λ¦¬ (99% μ„±κ³µλ¥ )
- **λ‹¤μ¤‘ μ ‘κ·Ό**: 7κ°€μ§€ μ¶”μ¶ ν¨ν„΄

### β… OpenAI νμΈνλ‹ μ™„μ „ μ „ν™ (Claude β†’ OpenAI)
- **μλ™ν™” νμ΄ν”„λΌμΈ**: λ°μ΄ν„°μ…‹ μƒμ„± β†’ ν›λ ¨ β†’ λ°°ν¬
- **μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§**: 30μ΄λ§λ‹¤ μƒνƒ μ²΄ν¬
- **μ›Ή κΈ°λ° κ΄€λ¦¬**: λ¨λΈ ν…μ¤νΈ, ν™κ²½λ³€μ μ μ©
- **ν„μ¬ λ¨λΈ**: `ft:gpt-4o-mini-2024-07-18:personal:blog-classification:BdFTMzJn`

### β… RLHF μ‹μ¤ν…
- **λ¶„λ¥/νƒκΉ… μ μ**: 1-5 λ³„μ  ν‰κ°€
- **λ°λ³µ λ¬Έκµ¬ λ°©μ§€**: μλ™ κ°μ§€ λ° ν•™μµ λ°μ
- **μƒνƒ κ΄€λ¦¬**: localStorage κΈ°λ° μ§€μ†μ„±

### β… μ½”λ“ μµμ ν™”
- **autoClassificationManager.js**: 373μ¤„ β†’ 206μ¤„ (167μ¤„ κ°μ†)
- **μ¬κµ¬μ„± μ‹μ¤ν…**: OpenAI μ‘λ‹µ μ¤λ¥ μλ™ λ³µκµ¬
- **λ²”μ©μ„±**: ν”λ«νΌ λ…λ¦½μ  κµ¬μ΅°

## μµκ·Ό μ‘μ—… (2025-06-01)

### π› οΈ λ¶„λ¥ κ²°κ³Ό μ¬κµ¬μ„± μ‹μ¤ν… κµ¬ν„
**λ¬Έμ **: OpenAI νμΈνλ‹ λ¨λΈμ 3κ°€μ§€ λ¶„λ¥ λ¬Έμ 
1. Title: user λ¶€λ¶„ μ™„μ „ μ¤λ¥
2. FirstParagraph: assistant λ¶€λ¶„ λμ—μ„ κ°‘μκΈ° μ”μ•½λ¨  
3. Closing: assistantκ°€ μ „μ²΄ λ³Έλ¬Έ μ¶λ ¥

**ν•΄κ²°**: AutoClassificationManager μ¬κµ¬μ„± λ©”μ„λ“ κµ¬ν„
- `cleanUserSection()`: λ°λ³µ λ¬Έκµ¬ λ° μ¤μ—Ό μ½ν…μΈ  μ κ±°
- `isUserSectionTooCorrupted()`: user μ„Ήμ… ν’μ§ κ²€μ¦
- `reconstructFromInvalidFormat()`: μλ»λ ν•μ‹ μλ™ λ³µκµ¬
- `reconstructTitleFormat()`: μ λ© ν•μ‹ μλ™ μƒμ„±
- `reconstructClosingFormat()`: ν΄λ΅μ§• νƒκ·Έ μ •λ¦¬

**κ²°κ³Ό**: 
- β… **Title**: κΉ”λ”ν• fallback ν•μ‹μΌλ΅ μλ™ λ³µκµ¬
- β… **FirstParagraph**: μ™„λ²½ν•κ² μ‘λ™ (μ”μ•½ μ—†μ΄ μ •ν™•ν• κΈΈμ΄)
- β… **Closing**: user νƒκ·Έ μ •λ¦¬λ¨

### π§ λ¨λΈ ν…μ¤νΈ κΈ°λ¥ ν™•μ¥
**κΈ°μ΅΄**: Titleλ§ ν…μ¤νΈ κ°€λ¥
**κ°μ„ **: 5κ° μΉ΄ν…κ³ λ¦¬ μ „μ²΄ ν…μ¤νΈ κ°€λ¥

**κµ¬ν„ λ‚΄μ©**:
- μΉ΄ν…κ³ λ¦¬ μ„ νƒ λ“λ΅­λ‹¤μ΄ μ¶”κ°€
- μΉ΄ν…κ³ λ¦¬λ³„ μ‹μ¤ν… ν”„λ΅¬ν”„νΈ μ •μ
- μΉ΄ν…κ³ λ¦¬λ³„ ν”λ μ΄μ¤ν™€λ” ν…μ¤νΈ μ κ³µ
- max_tokens μΉ΄ν…κ³ λ¦¬λ³„ μ΅°μ • (title: 100, λ‚λ¨Έμ§€: 500)

**μ‚¬μ©λ²•**: νμΈνλ‹ νƒ­ β†’ λ¨λΈ μ„ νƒ β†’ μΉ΄ν…κ³ λ¦¬ μ„ νƒ β†’ ν…μ¤νΈ μ‹¤ν–‰

## ν„μ¬ νμΈνλ‹ ν„ν™©
- **μ΄ ν›λ ¨ νμΌ**: 77κ° (training: 45, auto_classified: 32)
- **νμΈνλ‹ λ°μ΄ν„°μ…‹**: 45κ° (μ¤‘λ³µ μ—†μ)
- **μ„±κ³µν• λ¨λΈ**: 3κ° (μµμ‹ : BdL72WuC, ν„μ¬ μ‚¬μ©: BdFTMzJn)
- **RLHF λ°μ΄ν„°**: 29κ° μ‹¤μ  ν‰κ°€ λ°μ΄ν„°

## API μ—”λ“ν¬μΈνΈ
### λ¶„λ¥ λ° RLHF
- `POST /extract-blog` - λΈ”λ΅κ·Έ μ¶”μ¶ λ° μλ™ λ¶„λ¥
- `GET /api/classification/unrated` - λ―Έν‰κ°€ νμΌ λ©λ΅
- `POST /api/classification/evaluate` - ν‰κ°€ μ €μ¥

### νμΈνλ‹ κ΄€λ¦¬
- `POST /api/finetune/start` - νμΈνλ‹ μ‹μ‘
- `POST /api/finetune/test` - λ¨λΈ ν…μ¤νΈ (μΉ΄ν…κ³ λ¦¬λ³„)
- `GET /api/finetune/models` - μ‚¬μ© κ°€λ¥ν• λ¨λΈ λ©λ΅
- `POST /api/finetune/apply-model` - λ¨λΈ ν™κ²½λ³€μ μ μ©

## κΈ°μ  μ¤νƒ
- **Backend**: Node.js, Express, Puppeteer
- **AI**: OpenAI GPT-4o-mini (νμΈνλ‹), OpenAI GPT (RLHF)
- **Frontend**: Vanilla JS, Modern CSS
- **λ°μ΄ν„°**: JSONL (νμΈνλ‹), localStorage (μƒνƒκ΄€λ¦¬)

## μ΄μ κ°€μ΄λ“
```bash
# μ„λ²„ μ‹μ‘
node server.js  # http://localhost:3000

# νμΈνλ‹ μ‹¤ν–‰
node scripts/finetune_openai.js

# λ¨λΈ ν…μ¤νΈ
node scripts/finetune_openai.js test <MODEL_ID>
```

### RLHF μ‚¬μ©λ²•
1. μλ™λ¶„λ¥ νƒ­ β†’ λΈ”λ΅κ·Έ URL μ…λ ¥ β†’ λ¶„λ¥
2. νμΌ μ„ νƒ β†’ λ³„μ  ν‰κ°€ + λ¨λ²” λ‹µμ• μ μ•
3. "μ μ•ν•κΈ°" β†’ "Nκ° ν‰κ°€ μ™„λ£ - RLHF μ μ¶"

### νμΈνλ‹ μ‚¬μ©λ²•
1. νμΈνλ‹ νƒ­ β†’ λ°μ΄ν„°μ…‹ ν™•μΈ
2. "νμΈνλ‹ μ‹μ‘" β†’ μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§
3. μ™„λ£ ν›„ λ¨λΈ ν…μ¤νΈ β†’ ν™κ²½λ³€μ μ μ©

---
**ν„μ¬ μƒνƒ**: λ¶„λ¥ μ¬κµ¬μ„± μ‹μ¤ν… κµ¬ν„ μ™„λ£, μΉ΄ν…κ³ λ¦¬λ³„ λ¨λΈ ν…μ¤νΈ μ§€μ›  
**λ§μ§€λ§‰ μ—…λ°μ΄νΈ**: 2025-06-01  
**λ‹¤μ κ°μ„ μ‚¬ν•­**: TextAnalyzer λ¬Έλ‹¨ λ¶„λ¦¬ λ΅μ§ κ°μ„  (closing λ¶„λ¥ μ •ν™•λ„ ν–¥μƒ)